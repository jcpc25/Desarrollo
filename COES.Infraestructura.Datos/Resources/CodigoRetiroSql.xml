<?xml version="1.0" encoding="utf-8" ?>
<Sqls>

  <Sql>
    <key>GetById</key>
    <query>
      select TRN_CODIGO_RETIRO_SOLICITUD.*,
      VW_SI_EMPRESA.EMPRNOMB,
      TRN_BARRA.BARRBARRATRANSFERENCIA,
      TRN_TIPO_CONTRATO.TIPCONNOMBRE,
      TRN_TIPO_USUARIO.TIPUSUNOMBRE,
      VW_SI_EMPRESA.EMPRNOMB as CLINOMBRE
      from TRN_CODIGO_RETIRO_SOLICITUD join VW_SI_EMPRESA on VW_SI_EMPRESA.EMPRCODI = TRN_CODIGO_RETIRO_SOLICITUD.GENEMPRCODI
      join TRN_BARRA  on TRN_BARRA.BARRCODI = TRN_CODIGO_RETIRO_SOLICITUD.BARRCODI
      join TRN_TIPO_CONTRATO on TRN_TIPO_CONTRATO.TIPCONCODI = TRN_CODIGO_RETIRO_SOLICITUD.TIPCONCODI
      join TRN_TIPO_USUARIO ON TRN_TIPO_USUARIO.TIPUSUCODI = TRN_CODIGO_RETIRO_SOLICITUD.TIPUSUCODI
      WHERE TRN_CODIGO_RETIRO_SOLICITUD.CORESOCODI = :CORESOCODI
    </query>
  </Sql>

  <Sql>
    <key>Save</key>
    <query>
      insert into TRN_CODIGO_RETIRO_SOLICITUD
      (
      CORESOCODI, GENEMPRCODI,BARRCODI ,SEINUSERNAME, TIPCONCODI,TIPUSUCODI,CLIEMPRCODI,CORESOCODIGO,
      CORESOFECHAREGISTRO,CORESODESCRIPCION,CORESODETALLE,CORESOFECHAINICIO,CORESOFECHAFIN, CORESOOBSERVACION, 
      CORESOESTADO, CORESOFECINS)
      values
      (
      :CORESOCODI, :GENEMPRCODI, :BARRCODI, :SEINUSERNAME,:TIPCONCODI,:TIPUSUCODI,:CLIEMPRCODI,:CORESOCODIGO,
      :CORESOFECHAREGISTRO,:CORESODESCRIPCION,:CORESODETALLE,:CORESOFECHAINICIO,:CORESOFECHAFIN, :CORESOOBSERVACION,
      :CORESOESTADO, :CORESOFECINS)
    </query>
  </Sql>

  <Sql>
    <key>Update</key>
    <query>
      update TRN_CODIGO_RETIRO_SOLICITUD
      set
      GENEMPRCODI = :GENEMPRCODI,
      BARRCODI = :BARRCODI,
      COESUSERNAME = :COESUSERNAME,
      TIPCONCODI = :TIPCONCODI,
      TIPUSUCODI = :TIPUSUCODI,
      CLIEMPRCODI = :CLIEMPRCODI,
      CORESOCODIGO = :CORESOCODIGO,
      CORESOFECHAREGISTRO = :CORESOFECHAREGISTRO,
      CORESODESCRIPCION = :CORESODESCRIPCION,
      CORESODETALLE= :CORESODETALLE,
      CORESOFECHAINICIO = : CORESOFECHAINICIO,
      CORESOFECHAFIN = :CORESOFECHAFIN,
      CORESOOBSERVACION = :CORESOOBSERVACION,
      CORESOESTADO = :CORESOESTADO,
      CORESOFECACT = :CORESOFECACT,
      CORESOFECHASOLICITUDBAJA = :CORESOFECHASOLICITUDBAJA,
      CORESOFECHADEBAJA = :CORESOFECHADEBAJA
      where
      CORESOCODI = :CORESOCODI
    </query>
  </Sql>
  
  <Sql>
    <key>Delete</key>
    <query>
      update TRN_CODIGO_RETIRO_SOLICITUD
      set
      CORESOESTADO = :CORESOESTADO,
      CORESOFECACT = :CORESOFECACT
      where
      CORESOCODI = :CORESOCODI
    </query>
  </Sql>

  <Sql>
    <key>List</key>
    <query>
      select TRN_CODIGO_RETIRO_SOLICITUD.*,
      VW_SI_EMPRESA.EMPRNOMB,
      TRN_BARRA.BARRBARRATRANSFERENCIA,
      TRN_TIPO_CONTRATO.TIPCONNOMBRE,
      TRN_TIPO_USUARIO.TIPUSUNOMBRE,
      VW_SI_EMPRESA.EMPRNOMB as CLINOMBRE
      from TRN_CODIGO_RETIRO_SOLICITUD
      join VW_SI_EMPRESA on VW_SI_EMPRESA.EMPRCODI = TRN_CODIGO_RETIRO_SOLICITUD.GENEMPRCODI
      join TRN_BARRA  on TRN_BARRA.BARRCODI = TRN_CODIGO_RETIRO_SOLICITUD.BARRCODI
      join TRN_TIPO_CONTRATO on TRN_TIPO_CONTRATO.TIPCONCODI = TRN_CODIGO_RETIRO_SOLICITUD.TIPCONCODI
      join TRN_TIPO_USUARIO ON TRN_TIPO_USUARIO.TIPUSUCODI = TRN_CODIGO_RETIRO_SOLICITUD.TIPUSUCODI
      where TRN_CODIGO_RETIRO_SOLICITUD.CORESOESTADO = :CORESOESTADO
      order by TRN_CODIGO_RETIRO_SOLICITUD.CORESOCODI desc
    </query>
  </Sql>

  <Sql>
    <key>GetByCriteria</key>
    <query>
      SELECT TRN_CODIGO_RETIRO_SOLICITUD.*,
      VW_SI_EMPRESA.EMPRNOMB,
      TRN_BARRA.BARRBARRATRANSFERENCIA,
      TRN_TIPO_CONTRATO.TIPCONNOMBRE,
      TRN_TIPO_USUARIO.TIPUSUNOMBRE,
      VW_SI_EMPRESA.EMPRNOMB as CLINOMBRE
      from TRN_CODIGO_RETIRO_SOLICITUD
      join VW_SI_EMPRESA on VW_SI_EMPRESA.EMPRCODI = TRN_CODIGO_RETIRO_SOLICITUD.GENEMPRCODI
      join TRN_BARRA on TRN_BARRA.BARRCODI = TRN_CODIGO_RETIRO_SOLICITUD.BARRCODI
      join TRN_TIPO_CONTRATO on TRN_TIPO_CONTRATO.TIPCONCODI = TRN_CODIGO_RETIRO_SOLICITUD.TIPCONCODI
      join TRN_TIPO_USUARIO ON TRN_TIPO_USUARIO.TIPUSUCODI = TRN_CODIGO_RETIRO_SOLICITUD.TIPUSUCODI
      where (VW_SI_EMPRESA.EMPRNOMB =:EMPRNOMB  or :EMPRNOMB is null)
      and (TRN_TIPO_USUARIO.TIPUSUNOMBRE =:TIPUSUNOMBRE or :TIPUSUNOMBRE is null)
      and (TRN_TIPO_CONTRATO.TIPCONNOMBRE =:TIPCONNOMBRE or :TIPCONNOMBRE is null)
      and (TRN_BARRA.BARRBARRATRANSFERENCIA =:BARRBARRATRANSFERENCIA or :BARRBARRATRANSFERENCIA is null)
      and (VW_SI_EMPRESA.EMPRNOMB =:CLINOMBRE or :CLINOMBRE is null)
      and (TRN_CODIGO_RETIRO_SOLICITUD.CORESOFECHAINICIO &gt;=:CORESOFECHAINICIO or :CORESOFECHAINICIO is null)
      and (TRN_CODIGO_RETIRO_SOLICITUD.CORESOFECHAFIN &lt;=:CORESOFECHAFIN or :CORESOFECHAFIN is null)
      and (TRN_CODIGO_RETIRO_SOLICITUD.CORESOOBSERVACION =:CORESOOBSERVACION or :CORESOOBSERVACION is null)
      and (TRN_CODIGO_RETIRO_SOLICITUD.CORESOESTADO =:CORESOESTADO or :CORESOESTADO is null)
      order by  TRN_CODIGO_RETIRO_SOLICITUD.CORESOCODI desc
    </query>
  </Sql>

  <Sql>
    <key>GetMaxId</key>
    <query>
       select nvl(max(CORESOCODI), 0) + 1 from TRN_CODIGO_RETIRO_SOLICITUD
    </query>
  </Sql>

  <Sql>
    <key>GetBySoliCodireticodigo</key>
    <query>
      select TRETTABLA,TRETCORESOCORESCCODI,TRETCODIGO,BARRCODI,cast(GENEMPRCODI as NUMBER(5)) AS GENEMPRCODI, CLIEMPRCODI ,FECHAINICIO, FECHAFIN
      from vw_trn_codigo_retiro where vw_trn_codigo_retiro.TRETCODIGO =:TRETCODIGO
    </query>
  </Sql>



</Sqls>